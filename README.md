# Пользовательский пул потоков для высоконагруженных серверных приложений

## Автор
**Разуваев Денис**

## Описание проекта
Данный проект представляет собой реализацию многопоточного пула потоков с расширенными возможностями для высоконагруженных серверных приложений. Разработанный пул обеспечивает гибкое управление потоками, эффективное распределение задач, настраиваемые политики отказа и подробное логирование.

## Особенности реализации

### Настраиваемые параметры пула:
- **corePoolSize** — минимальное количество потоков
- **maxPoolSize** — максимальное количество потоков
- **keepAliveTime** — время жизни потока в бездействии
- **queueSize** — ограничение на количество задач в очереди
- **minSpareThreads** — минимальное число резервных потоков

### Алгоритмы распределения задач:
- **Round-Robin** — циклическое распределение между очередями
- **Least-Loaded** — распределение в наименее загруженную очередь

### Политики обработки отказов:
- **ABORT** — отклонение задачи с выбросом исключения
- **CALLER_RUNS** — выполнение задачи в потоке вызывающего
- **DISCARD** — тихое отбрасывание задачи
- **DISCARD_OLDEST** — отбрасывание старейшей задачи для освобождения места

### Структура кода:
- **CustomExecutor.java** — интерфейс пула потоков
- **CustomThreadPool.java** — основная реализация
- **ThreadPoolDemo.java** — демонстрационная программа с тестовыми сценариями

## Запуск проекта
1. Скомпилируйте все файлы: javac CustomExecutor.java CustomThreadPool.java ThreadPoolDemo.java

2. Запустите демонстрационную программу: java ThreadPoolDemo

## Соответствие требованиям курсовой работы

### 1. Параметры настройки пула
✅ Реализованы все требуемые параметры: corePoolSize, maxPoolSize, keepAliveTime, queueSize, minSpareThreads.

### 2. Обработка отказов
✅ Реализованы различные стратегии обработки отказов, включая:
- Отклонение задачи с исключением
- Выполнение в текущем потоке
- Отбрасывание задачи
- Отбрасывание старейшей задачи

### 3. Распределение задач
✅ Реализованы два алгоритма балансировки:
- Round Robin (по умолчанию)
- Least Loaded (выбор наименее загруженной очереди)

### 4. Кастомизация компонентов
✅ Реализована собственная ThreadFactory с присвоением уникальных имен потокам и логированием.
✅ Используются индивидуальные BlockingQueue для каждого потока.

### 5. Рабочие потоки (Worker)
✅ Реализована логика обработки задач из закрепленной очереди.
✅ Потоки корректно завершаются после таймаута бездействия.
✅ Проверка состояния пула перед выполнением задачи.

### 6. Логирование
✅ Подробное логирование всех операций, включая:
- Создание и завершение потоков
- Прием и выполнение задач
- Отказы в обработке
- Таймауты бездействия

### 7. Интерфейс управления
✅ Реализован интерфейс CustomExecutor с требуемыми методами:
- execute(Runnable)
- submit(Callable<T>)
- shutdown()
- shutdownNow()

### 8. Демонстрационная программа
✅ Создана демонстрационная программа с различными сценариями для проверки работоспособности пула.

### 9. Отчет по производительности
✅ Данный README включает сравнение с ThreadPoolExecutor и анализ эффективности реализованного пула.

## Преимущества по сравнению со стандартным ThreadPoolExecutor

1. **Улучшенное распределение нагрузки**:
   - Наличие нескольких очередей снижает конкуренцию за ресурсы
   - Алгоритм Least-Loaded обеспечивает более равномерную нагрузку

2. **Гибкие политики отказа**:
   - Возможность выбора наиболее подходящей стратегии для конкретного случая

3. **Поддержка резервных потоков**:
   - Параметр minSpareThreads обеспечивает быструю реакцию на всплески нагрузки

4. **Подробное логирование**:
   - Возможность отслеживать все ключевые события работы пула

5. **Улучшенное управление ресурсами**:
   - Более точный контроль над созданием и завершением потоков

## Заключение
Реализованный пул потоков отвечает всем требованиям курсовой работы и предоставляет расширенную функциональность по сравнению со стандартным ThreadPoolExecutor. Пул обеспечивает эффективное управление потоками, гибкую настройку и подробное логирование операций.
